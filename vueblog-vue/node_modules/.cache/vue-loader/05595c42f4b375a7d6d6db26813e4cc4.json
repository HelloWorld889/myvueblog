{"remainingRequest":"D:\\java工作空间\\vueblog\\vueblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\java工作空间\\vueblog\\vueblog-vue\\src\\views\\ChatRoom.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\java工作空间\\vueblog\\vueblog-vue\\src\\views\\ChatRoom.vue","mtime":1591018844394},{"path":"D:\\java工作空间\\vueblog\\vueblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\java工作空间\\vueblog\\vueblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\java工作空间\\vueblog\\vueblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\java工作空间\\vueblog\\vueblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9IZWFkZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQ2hhdFJvb20iLAogICAgY29tcG9uZW50czoge0hlYWRlcn0sCgogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93dGV4dHM6IFsnJ10sCiAgICAgICAgICAgIHRleHRhcmVhOiAnJywKICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgICAgIHZhbHVlOiB0cnVlLAogICAgICAgICAgICByZXZlcnNlOiB0cnVlLAogICAgICAgICAgICBhY3Rpdml0aWVzOiBbewogICAgICAgICAgICAgICAgY29udGVudDogJ+a0u+WKqOaMieacn+W8gOWniycsCiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICcyMDE4LTA0LTE1JwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBjb250ZW50OiAn6YCa6L+H5a6h5qC4JywKICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogJzIwMTgtMDQtMTMnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICfliJvlu7rmiJDlip8nLAogICAgICAgICAgICAgICAgdGltZXN0YW1wOiAnMjAxOC0wNC0xMScKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIHdzVVJMOiAnd3M6Ly8xMjcuMC4wLjE6ODA4MS93cycsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICB3ZWJTb2NrZXRJbml0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYodHlwZW9mKFdlYlNvY2tldCkgPT09ICJ1bmRlZmluZWQiKXsKICAgICAgICAgICAgICAgIGFsZXJ0KCLmgqjnmoTmtY/op4jlmajkuI3mlK/mjIFzb2NrZXQiKQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIC8vIOWunuS+i+WMlnNvY2tldAogICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMud3NVUkwpCiAgICAgICAgICAgICAgICAvLyDnm5HlkKxzb2NrZXTov57mjqUKICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IHRoaXMub3BlbgogICAgICAgICAgICAgICAgLy8g55uR5ZCsc29ja2V06ZSZ6K+v5L+h5oGvCiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5vbmVycm9yID0gdGhpcy5lcnJvcgogICAgICAgICAgICAgICAgLy8g55uR5ZCsc29ja2V05raI5oGvCiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2UKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb3BlbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzb2NrZXTov57mjqXmiJDlip/vvIEiKQogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygi6L+e5o6l6ZSZ6K+vIikKICAgICAgICB9LAogICAgICAgIGdldE1lc3NhZ2U6IGZ1bmN0aW9uKG1zZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cuZGF0YSk7CiAgICAgICAgICAgIHRoaXMuc2hvd3RleHRzLnB1c2gobXNnLmRhdGEpCgogICAgICAgIH0sCiAgICAgICAgc2VuZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyBsZXQgbWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YScpLnZhbHVlOwogICAgICAgICAgICAvLyB0aGlzLndlYlNvY2tldC5zZW5kKG1lc3NhZ2UpOwogICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGEnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICB0aGlzLnNvY2tldC5zZW5kKHRoaXMudGV4dGFyZWEpOwogICAgICAgICAgICB0aGlzLnRleHRhcmVhID0gJycKICAgICAgICB9LAogICAgICAgIGNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coInNvY2tldOWFs+mXre+8gSIpCiAgICAgICAgfSwKCgogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgLy8gbGV0IHdlYlNvY2tldCA9IG51bGw7CiAgICAgICAgLy8gd2ViU29ja2V0ID0gbmV3IFdlYlNvY2tldCgid3M6Ly8xMjcuMC4wLjE6OTAwMi93cyIpOwogICAgICAgIC8vIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyAgICAgd2ViU29ja2V0LmNsb3NlKCk7CiAgICAgICAgLy8gfTsKICAgICAgICAvLyB0aGlzLnBhZ2UoMSkKICAgICAgICB0aGlzLndlYlNvY2tldEluaXQoKQogICAgfSwKICAgIGRlc3Ryb3llZCAoKSB7CiAgICAgICAgLy8g6ZSA5q+B55uR5ZCsCiAgICAgICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IHRoaXMuY2xvc2UKICAgIH0KfQo="},{"version":3,"sources":["ChatRoom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatRoom.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <Header></Header>\r\n        <div style=\"\">\r\n            <el-card class=\"box-card\">\r\n<!--                <div v-for=\"o in 4\" :key=\"o\" class=\"text item\">-->\r\n<!--                    {{'列表内容 ' + o }}-->\r\n\r\n<!--                </div>-->\r\n                <div v-for=\"showtext in showtexts\" class=\"text item\">\r\n                    {{ showtext }}\r\n                </div>\r\n<!--                <el-timeline :reverse=\"reverse\">-->\r\n<!--                    <el-timeline-item-->\r\n<!--                            v-for=\"(activity, index) in activities\"-->\r\n<!--                            :key=\"index\"-->\r\n<!--                            :timestamp=\"activity.timestamp\">-->\r\n<!--                        {{activity.content}}-->\r\n<!--                    </el-timeline-item>-->\r\n<!--                </el-timeline>-->\r\n            </el-card>\r\n        </div>\r\n        <br/>\r\n        <el-divider></el-divider>\r\n        <div>\r\n            <el-row :gutter=\"10\">\r\n                <el-col :span=\"20\">\r\n\r\n                    <el-switch\r\n                            v-model=\"value\"\r\n                            active-color=\"#13ce66\"\r\n                            inactive-color=\"#ff4949\">\r\n                    </el-switch>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-button type=\"primary\" v-on:click=\"send\">发送</el-button>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <div style=\"margin: 20px 0;\"></div>\r\n            <el-input\r\n                    type=\"textarea\"\r\n                    placeholder=\"请输入内容\"\r\n                    v-model=\"textarea\"\r\n                    maxlength=\"30\"\r\n                    show-word-limit\r\n            >\r\n            </el-input>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Header from \"../components/Header\";\r\n    export default {\r\n        name: \"ChatRoom\",\r\n        components: {Header},\r\n\r\n        data() {\r\n            return {\r\n                showtexts: [''],\r\n                textarea: '',\r\n                count: 0,\r\n                value: true,\r\n                reverse: true,\r\n                activities: [{\r\n                    content: '活动按期开始',\r\n                    timestamp: '2018-04-15'\r\n                }, {\r\n                    content: '通过审核',\r\n                    timestamp: '2018-04-13'\r\n                }, {\r\n                    content: '创建成功',\r\n                    timestamp: '2018-04-11'\r\n                }],\r\n                wsURL: 'ws://127.0.0.1:8081/ws',\r\n            }\r\n        },\r\n        methods: {\r\n            webSocketInit: function() {\r\n                if(typeof(WebSocket) === \"undefined\"){\r\n                    alert(\"您的浏览器不支持socket\")\r\n                }else{\r\n                    // 实例化socket\r\n                    this.socket = new WebSocket(this.wsURL)\r\n                    // 监听socket连接\r\n                    this.socket.onopen = this.open\r\n                    // 监听socket错误信息\r\n                    this.socket.onerror = this.error\r\n                    // 监听socket消息\r\n                    this.socket.onmessage = this.getMessage\r\n                }\r\n            },\r\n            open: function() {\r\n                console.log(\"socket连接成功！\")\r\n            },\r\n            error: function() {\r\n                console.log(\"连接错误\")\r\n            },\r\n            getMessage: function(msg) {\r\n                console.log(msg.data);\r\n                this.showtexts.push(msg.data)\r\n\r\n            },\r\n            send: function () {\r\n                // let message = document.getElementById('ta').value;\r\n                // this.webSocket.send(message);\r\n                // document.getElementById('ta').value = '';\r\n                this.socket.send(this.textarea);\r\n                this.textarea = ''\r\n            },\r\n            close: function() {\r\n                console.log(\"socket关闭！\")\r\n            },\r\n\r\n\r\n        },\r\n        created() {\r\n            // let webSocket = null;\r\n            // webSocket = new WebSocket(\"ws://127.0.0.1:9002/ws\");\r\n            // window.onbeforeunload = function () {\r\n            //     webSocket.close();\r\n            // };\r\n            // this.page(1)\r\n            this.webSocketInit()\r\n        },\r\n        destroyed () {\r\n            // 销毁监听\r\n            this.socket.onclose = this.close\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}